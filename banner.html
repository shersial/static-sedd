<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CBanner Fragment</title>
  <style>
    @keyframes moveLeftActive {
      from {
        transform: translateX(0);
      }
      to {
        transform: translateX(100%);
      }
    }

    @keyframes moveLeft {
      from {
        transform: translateX(-100%);
      }
      to {
        transform: translateX(0);
      }
    }

    @keyframes moveRightActive {
      from {
        transform: translateX(0);
      }
      to {
        transform: translateX(-100%);
      }
    }

    @keyframes moveRight {
      from {
        transform: translateX(100%);
      }
      to {
        transform: translateX(0);
      }
    }

    .section-slider{
      height:665px
    }

    .section-slider .carousel {
      position: relative;
      height:665px
    }

    .section-slider .carousel-caption {
      bottom: 50%;
      left: 0;
      right: 0;
      transform: translateY(50%);
    }

    .section-slider .carousel-item {
      opacity: 0;
      height:665px;
      text-align: center;
    }
    .section-slider .carousel-item img.w-100 {
      width: auto!important;
    }

    .section-slider .carousel-item.move-right,
    .section-slider .carousel-item.move-left {
      animation-duration: 0.6s;
      animation-iteration-count: 1;
      display: block;
    }

    .section-slider .carousel-item.active,
    .section-slider .carousel-item.move-left,
    .section-slider .carousel-item.move-right {
      opacity: 1;
    }

    .section-slider .carousel-item.active {
      transform: translateX(0);
      height:665px
    }

    .section-slider .carousel-item.active.move-left {
      animation-name: moveLeftActive;
    }

    .section-slider .carousel-item.move-left {
      animation-name: moveLeft;
    }

    .section-slider .carousel-item.active.move-right {
      animation-name: moveRightActive;
    }

    .section-slider .carousel-item.move-right {
      animation-name: moveRight;
    }

    .section-slider .carousel-navigation {
      bottom: 10px;
      display: flex;
      justify-content: center;
      left: 0;
      list-style: none;
      padding-left: 0;
      position: absolute;
      right: 0;
      z-index: 15;
    }

    .section-slider .carousel-navigation button {
      background-color: rgba(255, 255, 255, 0.5);
      border: 0;
      flex: 0 1 auto;
      height: 3px;
      margin-left: 3px;
      margin-right: 3px;
      position: relative;
      width: 30px;
    }

    .section-slider .carousel-navigation button:focus {
      outline: 0;
      text-decoration: none;
    }

    .section-slider .carousel-navigation button.active {
      background-color: rgba(255, 255, 255, 1);
    }
  </style>
</head>
<body>
<section class="lfr-layout-structure-item-container">
  <div class="section-slider">
    <div class="carousel">
      <ol class="carousel-navigation">
        [#list 0..configuration.numberOfSlides-1 as i]
        <li>
          <button aria-controls="${fragmentEntryLinkNamespace}-carousel-item-${i+1}" aria-label="Focus slide ${i+1}" class="[#if i == 0]active[/#if]" type="button"></button>
        </li>
        [/#list]
      </ol>

      <div class="carousel-inner text-break" id="${fragmentEntryLinkNamespace}-carouselInner" role="group">
        [#list 0..configuration.numberOfSlides-1 as i]
        [#assign index = "${i+1}" /]

        [#if i lt 9]
        [#assign index = "0${i+1}" /]
        [/#if]

        <div class="[#if i == 0]active[/#if] carousel-item" id="${fragmentEntryLinkNamespace}-carousel-item-${i+1}">
          <img alt="Responsive Image ${i+1}" class="w-100" data-lfr-editable-id="${index}-01-image" data-lfr-editable-type="image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAEOCAYAAABRmsRnAAAACXBIWXMAAC4jAAAuIwF4pT92AAAK9klEQVR4Xu3VUQnAMBAFwcS/kEA9VFsLEXH7M2fgwXCw+zzvtxwBAgQIECAwKrAFeNTbGAECBAgQuAIC7BEIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAgLsBwgQIECAQCAgwAG6SQIECBAgIMB+gAABAgQIBAICHKCbJECAAAECAuwHCBAgQIBAICDAAbpJAgQIECAgwH6AAAECBAgEAgIcoJskQIAAAQIC7AcIECBAgEAgIMABukkCBAgQICDAfoAAAQIECAQCAhygmyRAgAABAj/ibTjyR8Zs7wAAAABJRU5ErkJggg==" />

          <div class="carousel-caption d-md-block d-none">
            <div data-lfr-editable-id="${index}-02-title" data-lfr-editable-type="rich-text">
              <h2>
                Slide ${i+1} Title
              </h2>
            </div>

            <div class="clearfix mb-4" data-lfr-editable-id="${index}-03-subtitle" data-lfr-editable-type="rich-text">
              <p>
                Slide ${i+1} Subtitle
              </p>
            </div>
          </div>
        </div>
        [/#list]
      </div>
      <button aria-controls="${fragmentEntryLinkNamespace}-carouselInner" aria-label="Previous Slide" class="carousel-control-prev" type="button">
        <span aria-hidden="true" class="carousel-control-prev-icon"></span>
        <span class="sr-only">Previous</span>
      </button>

      <button aria-controls="${fragmentEntryLinkNamespace}-carouselInner" aria-label="Next Slide" class="carousel-control-next" type="button">
        <span aria-hidden="true" class="carousel-control-next-icon"></span>
        <span class="sr-only">Next</span>
      </button>

    </div>
  </div>
</section>

<script>
  const MOVE_LEFT = 'move-left';
  const MOVE_RIGHT = 'move-right';
  const INTERVAL = 5000;

  const editMode = layoutMode === 'edit';
  const indicators = [].slice.call(
          fragmentElement.querySelectorAll('.carousel-navigation button')
  );
  const items = [].slice.call(fragmentElement.querySelectorAll('.carousel-item'));

  let moving = false;

  function getActiveIndicator() {
    return fragmentElement.querySelector('.carousel-navigation .active');
  }

  function activateIndicator(activeItem, nextItem, movement) {
    if (movement) {
      activeItem.classList.add(movement);
      nextItem.classList.add(movement);
    }

    getActiveIndicator().classList.remove('active');
    indicators[this.nextItemIndex].classList.add('active');
  }

  function activateItem(activeItem, nextItem, movement) {
    activeItem.classList.remove('active');
    nextItem.classList.add('active');

    if (movement) {
      activeItem.classList.remove(movement);
      nextItem.classList.remove(movement);
    }
  }

  function move(movement, index = null) {
    if (moving) {
      return;
    }

    moving = true;

    const activeItem = fragmentElement.querySelector('.carousel-item.active');
    const indexActiveItem = items.indexOf(activeItem);

    this.nextItemIndex = index;

    if (index === null) {
      this.nextItemIndex =
              indexActiveItem >= items.length - 1 ? 0 : indexActiveItem + 1;
    }

    const nextItem = items[this.nextItemIndex];

    activateIndicator(activeItem, nextItem, movement);

    setTimeout(function () {
      activateItem(activeItem, nextItem, movement);

      moving = false;
    }, 600);
  }

  function createInterval() {
    let intervalId = null;

    if (!editMode) {
      intervalId = setInterval(function () {
        if (document.contains(items[0])) {
          move(MOVE_RIGHT);
        }
        else {
          clearInterval(intervalId);
        }
      }, INTERVAL);
    }

    return intervalId;
  }

  (function main() {
    let intervalId = createInterval();

    if (this.nextItemIndex && this.nextItemIndex < items.length) {
      const activeItem = fragmentElement.querySelector(
              '.carousel-item.active'
      );
      const nextItem = items[this.nextItemIndex];

      activateIndicator(activeItem, nextItem);
      activateItem(activeItem, nextItem);
    }

    indicators.forEach(function (indicator, index) {
      indicator.addEventListener('click', function () {
        const indexActiveIndicator = indicators.indexOf(
                getActiveIndicator()
        );

        if (index !== indexActiveIndicator) {
          if (index < indexActiveIndicator) {
            move(MOVE_LEFT, index);
          }
          else {
            move(MOVE_RIGHT, index);
          }
        }

        clearInterval(intervalId);
        intervalId = createInterval();
      });
    });
  })();
</script>

<script src="">
  {
    "fieldSets": [
    {
      "fields": [
        {
          "dataType": "int",
          "defaultValue": "3",
          "label": "number-of-slides",
          "name": "numberOfSlides",
          "type": "text",
          "typeOptions": {
            "validation": {
              "min": 1,
              "type": "number"
            }
          }
        }
      ],
      "label": "slider-options"
    }
  ]
  }
</script>
</body>
</html>
